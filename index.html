<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ƒê·ªÅ Ki·ªÉm Tra S·ªë 26 ‚Äì L·ªãch S·ª≠</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=Source+Serif+4:wght@300;400;600&display=swap" rel="stylesheet">
<style>
  :root {
    --red: #c0392b;
    --gold: #d4a017;
    --dark: #1a1208;
    --paper: #fdf6e3;
    --ink: #2c1a0e;
    --muted: #7a6a5a;
    --green: #27ae60;
    --blue: #2980b9;
    --correct-bg: #eafaf1;
    --wrong-bg: #fdf2f2;
    --border: #d5c5a1;
    --shadow: rgba(44,26,14,0.13);
  }
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
  body {
    font-family: 'Source Serif 4', Georgia, serif;
    background: var(--paper);
    color: var(--ink);
    min-height: 100vh;
  }

  /* ---- HEADER ---- */
  header {
    background: var(--dark);
    color: var(--gold);
    text-align: center;
    padding: 28px 20px 20px;
    border-bottom: 4px solid var(--gold);
    position: sticky;
    top: 0;
    z-index: 100;
    box-shadow: 0 4px 18px var(--shadow);
  }
  header h1 {
    font-family: 'Playfair Display', serif;
    font-size: 1.6rem;
    letter-spacing: 2px;
    text-transform: uppercase;
  }
  header p { font-size: 0.88rem; color: #c9a96e; margin-top: 4px; }

  /* ---- TIMER ---- */
  #timer-bar {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 14px;
    background: #231800;
    padding: 10px 20px;
    position: sticky;
    top: 90px;
    z-index: 99;
    border-bottom: 2px solid var(--gold);
  }
  #timer-display {
    font-family: 'Playfair Display', serif;
    font-size: 2rem;
    color: var(--gold);
    letter-spacing: 3px;
    min-width: 90px;
    text-align: center;
    transition: color 0.3s;
  }
  #timer-display.urgent { color: #e74c3c; animation: pulse 1s infinite; }
  @keyframes pulse { 0%,100%{opacity:1} 50%{opacity:.6} }
  #timer-label { color: #c9a96e; font-size: 0.85rem; letter-spacing:1px; text-transform: uppercase; }
  #progress-text { color: #c9a96e; font-size: 0.82rem; }

  /* ---- MAIN ---- */
  main { max-width: 900px; margin: 0 auto; padding: 30px 18px 60px; }

  /* ---- SECTIONS ---- */
  .section-title {
    font-family: 'Playfair Display', serif;
    font-size: 1.25rem;
    color: var(--red);
    border-bottom: 2px solid var(--gold);
    padding-bottom: 8px;
    margin: 36px 0 22px;
    letter-spacing: 1px;
  }
  .section-note {
    background: #fff8e7;
    border-left: 4px solid var(--gold);
    padding: 10px 16px;
    font-size: 0.85rem;
    color: var(--muted);
    margin-bottom: 18px;
    border-radius: 0 6px 6px 0;
  }

  /* ---- QUESTION CARD ---- */
  .q-card {
    background: #fff;
    border: 1.5px solid var(--border);
    border-radius: 10px;
    margin-bottom: 22px;
    padding: 20px 22px 16px;
    box-shadow: 0 2px 10px var(--shadow);
    transition: border-color 0.2s;
  }
  .q-card.answered { border-color: var(--gold); }
  .q-num {
    font-family: 'Playfair Display', serif;
    font-size: 0.78rem;
    color: var(--muted);
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 7px;
  }
  .q-text {
    font-size: 0.97rem;
    line-height: 1.7;
    color: var(--ink);
    margin-bottom: 14px;
    font-weight: 600;
  }
  .q-text blockquote {
    font-style: italic;
    background: #fdf6e3;
    border-left: 3px solid var(--gold);
    padding: 10px 14px;
    margin: 8px 0 10px;
    font-weight: 400;
    font-size: 0.93rem;
    line-height: 1.75;
    color: #4a3322;
    border-radius: 0 6px 6px 0;
    white-space: pre-line;
  }
  .q-text .source-note {
    display: block;
    font-size: 0.8rem;
    color: var(--muted);
    font-style: italic;
    margin-top: 5px;
    font-weight: 400;
  }

  /* ---- OPTIONS (Part 1) ---- */
  .options { display: flex; flex-direction: column; gap: 8px; }
  .opt {
    display: flex;
    align-items: flex-start;
    gap: 10px;
    padding: 10px 14px;
    border: 1.5px solid var(--border);
    border-radius: 7px;
    cursor: pointer;
    transition: all 0.18s;
    background: var(--paper);
    font-size: 0.93rem;
    line-height: 1.55;
  }
  .opt:hover { border-color: var(--gold); background: #fffbf0; }
  .opt input[type="radio"] { margin-top: 3px; accent-color: var(--gold); flex-shrink: 0; }
  .opt.selected { border-color: var(--blue); background: #eef6ff; }
  .opt.correct { border-color: var(--green) !important; background: var(--correct-bg) !important; font-weight: 600; }
  .opt.wrong { border-color: var(--red) !important; background: var(--wrong-bg) !important; }
  .opt.highlight-correct { border-color: var(--green) !important; background: var(--correct-bg) !important; }

  /* ---- PART 2 ‚Äì TRUE/FALSE ---- */
  .tf-table { width: 100%; border-collapse: collapse; margin-top: 6px; }
  .tf-table th {
    background: var(--dark);
    color: var(--gold);
    font-family: 'Playfair Display', serif;
    font-size: 0.8rem;
    padding: 8px 12px;
    text-align: center;
    letter-spacing: 0.5px;
  }
  .tf-table td {
    border: 1px solid var(--border);
    padding: 10px 12px;
    font-size: 0.91rem;
    vertical-align: top;
    line-height: 1.6;
  }
  .tf-table tr:nth-child(even) td { background: #fdf6e3; }
  .tf-radio-group { display: flex; gap: 14px; justify-content: center; flex-wrap: nowrap; }
  .tf-btn {
    padding: 5px 14px;
    border: 1.5px solid var(--border);
    border-radius: 5px;
    cursor: pointer;
    font-size: 0.83rem;
    font-family: 'Source Serif 4', serif;
    background: var(--paper);
    transition: all 0.15s;
    white-space: nowrap;
  }
  .tf-btn:hover { background: #fffbf0; border-color: var(--gold); }
  .tf-btn.selected-true { background: #eef6ff; border-color: var(--blue); color: var(--blue); font-weight: 700; }
  .tf-btn.selected-false { background: #fff0f0; border-color: var(--red); color: var(--red); font-weight: 700; }
  .tf-btn.correct-reveal { background: var(--correct-bg) !important; border-color: var(--green) !important; color: var(--green) !important; font-weight: 700; }
  .tf-btn.wrong-reveal { background: var(--wrong-bg) !important; border-color: var(--red) !important; color: var(--red) !important; }
  .tf-label { font-size: 0.72rem; display: block; margin-top: 3px; text-align: center; color: var(--muted); }

  /* ---- SUBMIT BUTTON ---- */
  #submit-btn {
    display: block;
    margin: 36px auto 0;
    padding: 15px 52px;
    background: var(--red);
    color: #fff;
    border: none;
    border-radius: 8px;
    font-family: 'Playfair Display', serif;
    font-size: 1.12rem;
    letter-spacing: 1px;
    cursor: pointer;
    box-shadow: 0 4px 16px rgba(192,57,43,0.35);
    transition: all 0.2s;
  }
  #submit-btn:hover { background: #a93226; transform: translateY(-2px); }
  #submit-btn:disabled { background: var(--muted); cursor: default; transform: none; }

  /* ---- RESULT PANEL ---- */
  #result-panel {
    display: none;
    background: var(--dark);
    color: var(--gold);
    border-radius: 12px;
    padding: 32px 28px 28px;
    margin-top: 38px;
    text-align: center;
    box-shadow: 0 8px 32px var(--shadow);
  }
  #result-panel h2 { font-family: 'Playfair Display', serif; font-size: 1.9rem; margin-bottom: 10px; }
  #result-panel .score-big { font-size: 3.5rem; font-family: 'Playfair Display', serif; color: #fff; }
  #result-panel .score-detail { font-size: 0.9rem; color: #c9a96e; margin-top: 6px; }
  #result-panel table { width: 100%; max-width: 480px; margin: 20px auto 0; border-collapse: collapse; }
  #result-panel td, #result-panel th { padding: 8px 12px; border: 1px solid #4a3520; font-size: 0.88rem; }
  #result-panel th { background: #2c1a0e; color: var(--gold); }
  #result-panel td { color: #f0ddb0; }
  #result-panel .btn-redo {
    margin-top: 22px;
    padding: 11px 36px;
    background: var(--gold);
    color: var(--dark);
    border: none;
    border-radius: 7px;
    font-family: 'Playfair Display', serif;
    font-size: 1rem;
    cursor: pointer;
    transition: all 0.2s;
  }
  #result-panel .btn-redo:hover { background: #c9a917; }

  /* ---- REVIEW INDICATOR ---- */
  .review-mark { display: none; margin-top: 10px; padding: 7px 12px; border-radius: 6px; font-size: 0.83rem; font-weight: 600; }
  .review-mark.correct-mark { background: var(--correct-bg); color: var(--green); display: block; border: 1px solid var(--green); }
  .review-mark.wrong-mark { background: var(--wrong-bg); color: var(--red); display: block; border: 1px solid var(--red); }
  .review-mark.partial-mark { background: #fff8e7; color: #b7860b; display: block; border: 1px solid var(--gold); }

  /* ---- RESPONSIVE ---- */
  @media(max-width:600px) {
    header h1 { font-size: 1.15rem; }
    #timer-display { font-size: 1.5rem; }
    .q-text { font-size: 0.91rem; }
  }

  /* ===== MODAL X√ÅC NH·∫¨N N·ªòP B√ÄI (X·ªäN) ===== */
  .modal-overlay {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(26, 18, 8, 0.6); /* --dark v·ªõi ƒë·ªô trong su·ªët */
    backdrop-filter: blur(4px);
    z-index: 1000;
    align-items: center;
    justify-content: center;
  }
  .modal-overlay.show { display: flex; }
  .modal-box {
    background: #fff8f0;
    border: 3px solid var(--gold);
    border-radius: 24px;
    padding: 32px 28px;
    max-width: 400px;
    width: 90%;
    box-shadow: 0 30px 40px rgba(0,0,0,0.4);
    text-align: center;
    font-family: 'Source Serif 4', serif;
    color: var(--ink);
    animation: modalFadeIn 0.3s ease;
  }
  @keyframes modalFadeIn {
    from { opacity: 0; transform: scale(0.9); }
    to { opacity: 1; transform: scale(1); }
  }
  .modal-icon {
    font-size: 3.2rem;
    background: var(--gold);
    width: 80px;
    height: 80px;
    line-height: 80px;
    border-radius: 50%;
    margin: 0 auto 20px;
    color: var(--dark);
    border: 4px solid var(--dark);
  }
  .modal-title {
    font-family: 'Playfair Display', serif;
    font-size: 1.8rem;
    font-weight: 700;
    color: var(--dark);
    margin-bottom: 12px;
  }
  .modal-message {
    font-size: 1rem;
    color: var(--muted);
    margin-bottom: 28px;
    line-height: 1.6;
    background: rgba(212, 160, 23, 0.08);
    padding: 16px;
    border-radius: 16px;
    border-left: 4px solid var(--gold);
  }
  .modal-message strong {
    color: var(--red);
    font-size: 1.4rem;
    margin: 0 4px;
  }
  .modal-buttons {
    display: flex;
    gap: 16px;
    justify-content: center;
  }
  .btn-modal-cancel {
    background: #b0a090;
    color: #fff;
    border: none;
    padding: 12px 24px;
    font-size: 1rem;
    font-weight: 600;
    border-radius: 40px;
    cursor: pointer;
    transition: 0.2s;
    flex: 1;
    font-family: 'Playfair Display', serif;
    letter-spacing: 0.5px;
  }
  .btn-modal-cancel:hover {
    background: #9e8b78;
    transform: translateY(-2px);
  }
  .btn-modal-submit {
    background: var(--red);
    color: #fff;
    border: none;
    padding: 12px 24px;
    font-size: 1rem;
    font-weight: 700;
    border-radius: 40px;
    cursor: pointer;
    transition: 0.2s;
    flex: 1;
    box-shadow: 0 4px 12px rgba(192,57,43,0.3);
    font-family: 'Playfair Display', serif;
    letter-spacing: 0.5px;
  }
  .btn-modal-submit:hover {
    background: #a8231a;
    transform: translateY(-2px);
    box-shadow: 0 8px 18px rgba(192,57,43,0.4);
  }
</style>
</head>
<body>

<header>
  <h1>üìú ƒê·ªÅ Ki·ªÉm Tra S·ªë 26 ‚Äî L·ªãch S·ª≠</h1>
  <p>Tr·∫Øc nghi·ªám nhi·ªÅu l·ª±a ch·ªçn &amp; ƒê√∫ng / Sai ¬∑ Th·ªùi gian: 45 ph√∫t</p>
</header>

<div id="timer-bar">
  <span id="timer-label">‚è± Th·ªùi gian c√≤n l·∫°i</span>
  <span id="timer-display">45:00</span>
  <span id="progress-text">0 / 28 c√¢u ƒë√£ l√†m</span>
</div>

<main>
  <div id="quiz-form">

    <!-- PH·∫¶N I -->
    <div class="section-title">PH·∫¶N I ‚Äî Tr·∫Øc nghi·ªám m·ªôt l·ª±a ch·ªçn (24 c√¢u √ó 0.25 ƒëi·ªÉm)</div>
    <div class="section-note">M·ªói c√¢u ch·ªâ ch·ªçn <strong>m·ªôt</strong> ph∆∞∆°ng √°n ƒë√∫ng.</div>
    <div id="part1-container"></div>

    <!-- PH·∫¶N II -->
    <div class="section-title">PH·∫¶N II ‚Äî ƒê√∫ng / Sai (4 c√¢u √ó 1.0 ƒëi·ªÉm)</div>
    <div class="section-note">M·ªói √Ω a, b, c, d ch·ªçn <strong>ƒê√∫ng</strong> ho·∫∑c <strong>Sai</strong>. Thang ƒëi·ªÉm: 1 √Ω ƒë√∫ng = 0.1ƒë ¬∑ 2 √Ω ƒë√∫ng = 0.25ƒë ¬∑ 3 √Ω ƒë√∫ng = 0.5ƒë ¬∑ 4 √Ω ƒë√∫ng = 1.0ƒë</div>
    <div id="part2-container"></div>

    <button id="submit-btn" onclick="submitQuiz()">üì© N·ªòP B√ÄI</button>
  </div>

  <div id="result-panel">
    <h2>üèÜ K·∫æT QU·∫¢</h2>
    <div class="score-big" id="score-val"></div>
    <div class="score-detail" id="score-detail"></div>
    <table id="score-table">
      <thead><tr><th>Th√†nh ph·∫ßn</th><th>ƒêi·ªÉm ƒë·∫°t</th><th>T·ªëi ƒëa</th></tr></thead>
      <tbody id="score-tbody"></tbody>
    </table>
    <button class="btn-redo" onclick="redoQuiz()">üîÑ L√†m l·∫°i (c√¢u h·ªèi tr√°o ƒë·ªïi)</button>
  </div>
</main>

<!-- MODAL X√ÅC NH·∫¨N N·ªòP B√ÄI X·ªäN -->
<div class="modal-overlay" id="submitConfirmModal">
  <div class="modal-box">
    <div class="modal-icon">‚ö†Ô∏è</div>
    <div class="modal-title">X√°c nh·∫≠n n·ªôp b√†i</div>
    <div class="modal-message" id="modalMessage">
      B·∫°n c√≤n <strong id="modalUnansweredCount">0</strong> √Ω ch∆∞a l√†m.<br>B·∫°n c√≥ ch·∫Øc mu·ªën n·ªôp kh√¥ng?
    </div>
    <div class="modal-buttons">
      <button class="btn-modal-cancel" id="modalCancelBtn">‚úñ H·ªßy</button>
      <button class="btn-modal-submit" id="modalSubmitBtn">üì© N·ªôp b√†i</button>
    </div>
  </div>
</div>

<script>
/* ============================================================
   DATA
   ============================================================ */

const PART1_ORIGINAL = [
  {
    id: 'p1q1',
    text: 'N∆∞·ªõc V·∫°n Xu√¢n ƒë∆∞·ª£c th√†nh l·∫≠p (nƒÉm 544) l√† k·∫øt qu·∫£ c·ªßa cu·ªôc kh·ªüi nghƒ©a do nh√¢n v·∫≠t l·ªãch s·ª≠ n√†o sau ƒë√¢y l√£nh ƒë·∫°o?',
    opts: ['L√Ω B√≠.', 'Ng√¥ Quy·ªÅn.', 'Ph√πng H∆∞ng.', 'Quang Trung.'],
    answer: 0
  },
  {
    id: 'p1q2',
    text: 'M√¢u thu·∫´n bao tr√πm x√£ h·ªôi Vi·ªát Nam trong giai ƒëo·∫°n 1407 ƒë·∫øn 1428 l√†',
    opts: [
      'to√†n th·ªÉ nh√¢n d√¢n Vi·ªát Nam v·ªõi nh√† Minh.',
      'gi·ªØa nh√¢n d√¢n v√† nh·ªØng qu√Ω t·ªôc ng∆∞·ªùi Vi·ªát.',
      'gi·ªØa qu√Ω t·ªôc ng∆∞·ªùi Vi·ªát v√† ch√≠nh quy·ªÅn ƒë√¥ h·ªô.',
      'gi·ªØa to√†n th·ªÉ n√¥ng d√¢n v√† ch√≠nh quy·ªÅn ƒë√¥ h·ªô.'
    ],
    answer: 0
  },
  {
    id: 'p1q3',
    text: 'NƒÉm 1400, H·ªì Qu√Ω Ly bu·ªôc vua Tr·∫ßn nh∆∞·ªùng ng√¥i v√† l·∫≠p ra tri·ªÅu ƒë·∫°i',
    opts: ['nh√† L√™ s∆°.', 'nh√† Nguy·ªÖn.', 'nh√† H·ªì.', 'nh√† L√Ω.'],
    answer: 2
  },
  {
    id: 'p1q4',
    text: 'N·ªôi dung n√†o sau ƒë√¢y l√† m·ªôt trong nh·ªØng nguy√™n nh√¢n d·∫´n ƒë·∫øn s·ª± suy y·∫øu c·ªßa tri·ªÅu ƒë·∫°i nh√† Tr·∫ßn ·ªü n·ª≠a sau th·∫ø k·ªâ XIV?',
    opts: [
      'Gi·∫∑c Minh lƒÉm le sang x√¢m l∆∞·ª£c, qu√¢n ChƒÉm-pa t·∫•n c√¥ng.',
      'Nh√† n∆∞·ªõc kh√¥ng quan t√¢m s·∫£n xu·∫•t, quan l·∫°i ƒÉn ch∆°i h∆∞·ªüng l·∫°c.',
      'Chu VƒÉn An d√¢ng s·ªõ ch√©m gian th·∫ßn kh√¥ng ƒë∆∞·ª£c ch·∫•p thu·∫≠n.',
      'Nh√† Tr·∫ßn ti·∫øn h√†nh nhi·ªÅu cu·ªôc chi·∫øn tranh x√¢m l∆∞·ª£c t·ªën k√©m.'
    ],
    answer: 1
  },
  {
    id: 'p1q5',
    text: 'M·ª•c ti√™u v√† nguy√™n t·∫Øc ho·∫°t ƒë·ªông c·ªßa Li√™n h·ª£p qu·ªëc ƒë∆∞·ª£c quy ƒë·ªãnh b·ªüi vƒÉn ki·ªán quan tr·ªçng n√†o sau ƒë√¢y?',
    opts: ['Hi·∫øn ch∆∞∆°ng.', 'Hi·∫øn ph√°p.', 'Tuy√™n ng√¥n.', 'Hi·ªáp ƒë·ªãnh.'],
    answer: 0
  },
  {
    id: 'p1q6',
    text: 'N·ªôi dung n√†o sau ƒë√¢y l√† vai tr√≤ c·ªßa Li√™n h·ª£p qu·ªëc trong vi·ªác duy tr√¨ h√≤a b√¨nh, an ninh qu·ªëc t·∫ø?',
    opts: [
      'So·∫°n th·∫£o v√† x√¢y d·ª±ng ƒë∆∞·ª£c h·ªá th·ªëng c√°c c√¥ng ∆∞·ªõc qu·ªëc t·∫ø v·ªÅ gi·∫£i tr·ª´ qu√¢n b·ªã.',
      'NgƒÉn ch·∫∑n ƒë∆∞·ª£c c√°c cu·ªôc ƒë·ªëi ƒë·∫ßu ƒê√¥ng-T√¢y v√† xung ƒë·ªôt tr√™n th·∫ø gi·ªõi.',
      'Gi·∫£i quy·∫øt ƒë∆∞·ª£c m·ªçi tranh ch·∫•p, xung ƒë·ªôt tr√™n th·∫ø gi·ªõi b·∫±ng bi·ªán ph√°p h√≤a b√¨nh.',
      'Ch·∫•m d·ª©t ƒë∆∞·ª£c t√¨nh tr·∫°ng ch·∫°y ƒëua v≈© trang v√† s·∫£n xu·∫•t v≈© kh√≠ h·ªßy di·ªát.'
    ],
    answer: 0
  },
  {
    id: 'p1q7',
    text: 'VƒÉn ki·ªán n√†o sau ƒë√¢y n√™u r√µ m·ª•c ƒë√≠ch th√†nh l·∫≠p c·ªßa t·ªï ch·ª©c Hi·ªáp h·ªôi c√°c qu·ªëc gia ƒê√¥ng Nam √Å (ASEAN)?',
    opts: ['Tuy√™n b·ªë ASEAN.', 'Tuy√™n b·ªë Ba-li I.', 'Hi·∫øn ch∆∞∆°ng ASEAN.', 'T·∫ßm nh√¨n ASEAN.'],
    answer: 0
  },
  {
    id: 'p1q8',
    text: 'N·ªôi dung n√†o sau ƒë√¢y kh√¥ng ph·∫£i l√† nguy√™n nh√¢n th√†nh l·∫≠p c·ªßa t·ªï ch·ª©c Hi·ªáp h·ªôi c√°c qu·ªëc gia ƒê√¥ng Nam √Å (ASEAN)?',
    opts: [
      'Do nhu c·∫ßu h·ª£p t√°c ƒë·ªÉ c√πng ph√°t tri·ªÉn.',
      'Tr·ªü th√†nh ƒë·ªëi tr·ªçng c·ªßa ph∆∞∆°ng T√¢y.',
      'H·∫°n ch·∫ø nh·ªØng ·∫£nh h∆∞·ªüng t·ª´ b√™n ngo√†i.',
      'B√†i h·ªçc t·ª´ nh·ªØng th√†nh c√¥ng c·ªßa ch√¢u √Çu.'
    ],
    answer: 1
  },
  {
    id: 'p1q9',
    text: 'AEC l√† t√™n vi·∫øt t·∫Øt b·∫±ng ti·∫øng Anh c·ªßa',
    opts: [
      'C·ªông ƒë·ªìng Kinh t·∫ø ASEAN.',
      'C·ªông ƒë·ªìng Ch√≠nh tr·ªã - An ninh ASEAN.',
      'C·ªông ƒë·ªìng VƒÉn h√≥a ‚Äì X√£ h·ªôi ASEAN',
      'Hi·ªáp h·ªôi c√°c qu·ªëc gia ƒê√¥ng Nam √Å.'
    ],
    answer: 0
  },
  {
    id: 'p1q10',
    text: 'Trong cu·ªôc ƒë·∫•u tranh b·∫£o v·ªá T·ªï qu·ªëc c·ªßa nh√¢n d√¢n Vi·ªát Nam, s·ª± ki·ªán n√†o sau ƒë√¢y di·ªÖn ra v√†o ng√†y 17-2-1979?',
    opts: [
      'Trung Qu·ªëc ƒë∆∞a qu√¢n ƒë√°nh chi·∫øm c√°c ƒë·∫£o thu·ªôc qu·∫ßn ƒë·∫£o Tr∆∞·ªùng Sa.',
      'Qu√¢n Khmer ƒë·ªè ƒë√°nh chi·∫øm ƒë·∫£o T√¢y Ninh, Ph√∫ Qu·ªëc, ƒë·∫£o H√≤n M√™.',
      'Qu√¢n Trung Qu·ªëc ƒë√°nh chi·∫øm tr√°i ph√©p qu·∫ßn ƒë·∫£o Ho√†ng Sa c·ªßa Vi·ªát Nam.',
      'H√†ng ch·ª•c v·∫°n qu√¢n Trung Qu·ªëc t·∫•n c√¥ng bi√™n gi·ªõi ph√≠a B·∫Øc Vi·ªát Nam.'
    ],
    answer: 3
  },
  {
    id: 'p1q11',
    text: 'Nh√† n∆∞·ªõc C·ªông h√≤a x√£ h·ªôi ch·ªß nghƒ©a Vi·ªát Nam ƒë√£ kh·∫≥ng ƒë·ªãnh ch·ªß quy·ªÅn c·ªßa Vi·ªát Nam ƒë·ªëi v·ªõi qu·∫ßn ƒë·∫£o Ho√†ng Sa v√† Tr∆∞·ªùng Sa th√¥ng qua vi·ªác',
    opts: [
      'th√†nh l·∫≠p huy·ªán ƒë·∫£o Ho√†ng Sa v√† Tr∆∞·ªùng Sa.',
      'th√†nh l·∫≠p ƒë·ªôi Ho√†ng Sa, B·∫Øc H·∫£i v√† Tr∆∞·ªùng ƒê√†.',
      'cho ho√†n thi·ªán t·∫≠p ƒê·∫°i Nam nh·∫•t th·ªëng to√†n ƒë·ªì.',
      'c·ª≠ th·ªßy qu√¢n ra tu·∫ßn tra ƒë·∫£o ƒë·ªãnh k√¨ h√†ng nƒÉm.'
    ],
    answer: 0
  },
  {
    id: 'p1q12',
    text: 'T·ª´ cu·ªëi nƒÉm 1978, tr∆∞·ªõc cu·ªôc t·∫•n c√¥ng c·ªßa qu√¢n P√¥n P·ªët, qu√¢n ƒë·ªôi nh√¢n d√¢n Vi·ªát Nam ƒë√£ c√≥ h√†nh ƒë·ªông n√†o sau ƒë√¢y?',
    opts: [
      'M·ªü c√°c cu·ªôc ph·∫£n c√¥ng v√† d·ª´ng l·∫°i ·ªü bi√™n gi·ªõi Vi·ªát Nam - Cam-pu-chia.',
      'ƒê√†m ph√°n ngo·∫°i giao, l√™n √°n h√†nh ƒë·ªông x√¢m l∆∞·ª£c c·ªßa P√¥n P·ªët.',
      'T·ªï ch·ª©c ph·∫£n c√¥ng, ƒë√°nh b·∫≠t l·ª±c l∆∞·ª£ng P√¥n P·ªët ra kh·ªèi l√£nh th·ªï.',
      'T√≠ch c·ª±c ƒë·∫•u tranh ngo·∫°i giao, c·∫ßu c·ª©u s·ª± vi·ªán tr·ª£ c·ªßa qu·ªëc t·∫ø.'
    ],
    answer: 2
  },
  {
    id: 'p1q13',
    text: 'Trong qu√° tr√¨nh b·∫£o v·ªá ch·ªß quy·ªÅn qu·ªëc gia ·ªü Bi·ªÉn ƒê√¥ng, Vi·ªát Nam ƒë√£ lu√¥n ki√™n ƒë·ªãnh con ƒë∆∞·ªùng',
    opts: [
      'ƒë·∫•u tranh b·∫±ng c√°c bi·ªán ph√°p ph√π h·ª£p v·ªõi lu·∫≠t ph√°p qu·ªëc t·∫ø.',
      'b·∫£o v·ªá ho√† b√¨nh, ph√π h·ª£p v·ªõi lu·∫≠t ph√°p khu v·ª±c v√† qu·ªëc t·∫ø.',
      'b·∫£o v·ªá v·ªØng ch·∫Øc ch·ªß quy·ªÅn v√† l·ª£i √≠ch khu v·ª±c.',
      'ƒë·∫•u tranh b·∫±ng m·ªçi bi·ªán ph√°p, kh√¥ng ƒë√†m ph√°n.'
    ],
    answer: 0
  },
  {
    id: 'p1q14',
    text: 'Trong ƒë∆∞·ªùng l·ªëi ƒë·ªïi m·ªõi ƒë·∫•t n∆∞·ªõc c·ªßa ƒê·∫£ng C·ªông s·∫£n Vi·ªát Nam giai ƒëo·∫°n 1996 - 2006, n·ªôi dung n√†o sau ƒë√¢y l√† m·ªôt trong nh·ªØng ch·ªß tr∆∞∆°ng ƒë·ªïi m·ªõi v·ªÅ ƒë·ªëi ngo·∫°i?',
    opts: [
      'Ph√°t tri·ªÉn gi√°o d·ª•c - ƒë√†o t·∫°o v√† khoa h·ªçc ‚Äì c√¥ng ngh·ªá.',
      'C·∫£i c√°ch t·ªï ch·ª©c Nh√† n∆∞·ªõc ph√°p quy·ªÅn x√£ h·ªôi ch·ªß nghƒ©a.',
      'X√¢y d·ª±ng v√† ph√°t tri·ªÉn n·ªÅn vƒÉn ho√° d√¢n t·ªôc ti√™n ti·∫øn.',
      'ƒê·∫∑t tr·ªçng t√¢m ch·ªß tr∆∞∆°ng "h·ªôi nh·∫≠p kinh t·∫ø qu·ªëc t·∫ø".'
    ],
    answer: 3
  },
  {
    id: 'p1q15',
    text: 'Th√†nh t·ª±u ƒë·ªëi m·ªõi vƒÉn ho√° - gi√°o d·ª•c ·ªü Vi·ªát Nam (t·ª´ nƒÉm 1986) c√≥ √Ω nghƒ©a n√†o sau ƒë√¢y?',
    opts: [
      'B·∫£o t·ªìn c√°c gi√° tr·ªã vƒÉn ho√° truy·ªÅn th·ªëng v√† t·∫°o ra c√°c gi√° tr·ªã vƒÉn ho√° m·ªõi ti·∫øn b·ªô.',
      'ƒê∆∞a Vi·ªát Nam tr·ªü th√†nh n∆∞·ªõc ƒë·∫ßu ti√™n trong khu v·ª±c ph·ªï c·∫≠p trung h·ªçc ph·ªï th√¥ng.',
      'S√°ng t·∫°o ra c√°c gi√° tr·ªã vƒÉn ho√° m·ªõi, tri·ªát ti√™u ho√†n to√†n c√°c t√†n d∆∞ c·ªßa vƒÉn ho√° c≈©.',
      'N√¢ng cao ch·∫•t l∆∞·ª£ng gi√°o d·ª•c, tr·ªü th√†nh qu·ªëc gia c√≥ n·ªÅn gi√°o d·ª•c t·ªët nh·∫•t ch√¢u √Å.'
    ],
    answer: 0
  },
  {
    id: 'p1q16',
    text: 'N·ªôi dung n√†o sau ƒë√¢y l√† m·ªôt trong nh·ªØng ho·∫°t ƒë·ªông ƒë·ªëi ngo·∫°i c·ªßa Ch√≠nh ph·ªß Vi·ªát Nam D√¢n ch·ªß C·ªông h√≤a sau C√°ch m·∫°ng th√°ng T√°m nƒÉm 1945?',
    opts: [
      'ƒê·ªÅ ngh·ªã Li√™n h·ª£p qu·ªëc c√¥ng nh·∫≠n Nh√† n∆∞·ªõc Vi·ªát Nam D√¢n ch·ªß C·ªông h√≤a.',
      'Li√™n minh v·ªõi Mƒ© ch·ªëng Ph√°p quay tr·ªü l·∫°i x√¢m l∆∞·ª£c Vi·ªát Nam l·∫ßn th·ª© hai.',
      'Tham gia phe ƒë·ªìng minh v√† tr·ªü th√†nh l·ª±c l∆∞·ª£ng ƒë·ªìng minh ch·ªëng ph√°t x√≠t.',
      'Li√™n minh ch·∫∑t ch·∫Ω v·ªõi Ph√°p ƒë·ªÉ ƒë√°nh ƒëu·ªïi ph√°t x√≠t Nh·∫≠t ra kh·ªèi n∆∞·ªõc ta.'
    ],
    answer: 0
  },
  {
    id: 'p1q17',
    text: 'N·ªôi dung n√†o sau ƒë√¢y l√† ƒë·ªëi s√°ch ngo·∫°i giao c·ªßa Ch√≠nh ph·ªß Vi·ªát Nam D√¢n ch·ªß C·ªông h√≤a ƒë·ªëi v·ªõi qu√¢n Trung Hoa D√¢n qu·ªëc sau C√°ch m·∫°ng th√°ng T√°m nƒÉm 1945?',
    opts: [
      'Nh·ªù s·ª± can thi·ªáp c·ªßa Mƒ© bu·ªôc ch√∫ng r√∫t kh·ªèi n∆∞·ªõc ta.',
      'Ti·∫øn h√†nh th·ª±c hi·ªán bi·ªán ph√°p v·ª´a ƒë√°nh v·ª´a ƒë√†m.',
      'Nh√¢n nh∆∞·ª£ng c√≥ nguy√™n t·∫Øc v·ªÅ kinh t·∫ø v√† ch√≠nh tr·ªã.',
      'T·∫≠p trung l·ª±c l∆∞·ª£ng ƒë√°nh ƒëu·ªïi ch√∫ng ra kh·ªèi n∆∞·ªõc ta.'
    ],
    answer: 2
  },
  {
    id: 'p1q18',
    text: 'Ho·∫°t ƒë·ªông c·ªßa Phan Ch√¢u Trinh trong th·ªùi gian ·ªü Ph√°p (nh·ªØng nƒÉm ƒë·∫ßu th·∫ø k·ªâ XX) nh·∫±m m·ª•c ƒë√≠ch n√†o sau ƒë√¢y?',
    opts: [
      'Thi·∫øt l·∫≠p quan h·ªá v·ªõi n∆∞·ªõc Ph√°p.',
      'V·∫≠n ƒë·ªông c·∫£i c√°ch cho Vi·ªát Nam.',
      'Nh·ªù Ph√°p ƒë·ªÉ ƒë√°nh ƒëu·ªïi Nh·∫≠t B·∫£n.',
      'V·∫≠n ƒë·ªông trao tr·∫£ ƒë·ªôc l·∫≠p cho Vi·ªát Nam.'
    ],
    answer: 1
  },
  {
    id: 'p1q19',
    text: 'NƒÉm 1987, t·ªï ch·ª©c Gi√°o d·ª•c, Khoa h·ªçc v√† VƒÉn h√≥a c·ªßa Li√™n h·ª£p qu·ªëc (UNESCO) ƒë√£ vinh danh Ch·ªß t·ªãch H·ªì Ch√≠ Minh l√†',
    opts: [
      'Nh√† khoa h·ªçc xu·∫•t s·∫Øc.',
      'Nh√† ho·∫°t ƒë·ªông m√¥i tr∆∞·ªùng n·ªïi ti·∫øng.',
      'Nh√† kinh t·∫ø h·ªçc l·ªói l·∫°c.',
      'Anh h√πng gi·∫£i ph√≥ng d√¢n t·ªôc.'
    ],
    answer: 3
  },
  {
    id: 'p1q20',
    text: 'Trong qu√° tr√¨nh chu·∫©n b·ªã cho c√°ch m·∫°ng th√°ng T√°m (1941-1945), c√°c ho·∫°t ƒë·ªông c·ªßa Nguy·ªÖn √Åi Qu·ªëc - H·ªì Ch√≠ Minh ƒë√£ ƒëem l·∫°i k·∫øt qu·∫£ n√†o sau ƒë√¢y?',
    opts: [
      'Th√†nh l·∫≠p ƒë∆∞·ª£c t·ªï ch·ª©c l√£nh ƒë·∫°o m·ªçi th·∫Øng l·ª£i c·ªßa c√°ch m·∫°ng.',
      'Tr·ª±c ti·∫øp l√£nh ƒë·∫°o th·∫Øng l·ª£i phong tr√†o X√¥ vi·∫øt ·ªü Ngh·ªá - Tƒ©nh.',
      'T·∫°o ƒëi·ªÅu ki·ªán cho th·∫Øng l·ª£i c·ªßa cu·ªôc kh√°ng chi·∫øn ch·ªëng Ph√°p.',
      'Chu·∫©n b·ªã nh·ªØng ƒëi·ªÅu ki·ªán c∆° b·∫£n cho s·ª± b√πng n·ªï c·ªßa c√°ch m·∫°ng.'
    ],
    answer: 3
  },
  {
    id: 'p1q21',
    text: 'Vi·ªát Nam ƒë√£ v·∫≠n d·ª•ng nguy√™n t·∫Øc n√†o sau ƒë√¢y c·ªßa Hi·∫øn ch∆∞∆°ng Li√™n h·ª£p qu·ªëc ƒë·ªÉ gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ ph·ª©c t·∫°p ·ªü Bi·ªÉn ƒê√¥ng hi·ªán nay?',
    opts: [
      'Gi·∫£i quy·∫øt c√°c tranh ch·∫•p b·∫±ng bi·ªán ph√°p h√≤a b√¨nh.',
      'Quy·ªÅn t·ª± quy·∫øt gi·ªØa c√°c th√†nh vi√™n Li√™n h·ª£p qu·ªëc.',
      'Kh√¥ng ƒëe d·ªça v≈© l·ª±c ƒë·ªÉ t·∫•n c√¥ng v√†o qu·ªëc gia kh√°c.',
      'ƒê·∫£m b·∫£o s·ª± nh·∫•t tr√≠ c·ªßa c√°c n∆∞·ªõc th√†nh vi√™n th∆∞·ªùng tr·ª±c.'
    ],
    answer: 0
  },
  {
    id: 'p1q22',
    text: 'Qua th·ª±c ti·ªÖn cu·ªôc ƒë·∫•u tranh b·∫£o v·ªá T·ªï qu·ªëc ·ªü Vi·ªát Nam t·ª´ 1945 ƒë·∫øn nay, c√≥ th·ªÉ r√∫t ra b√†i h·ªçc kinh nghi·ªám n√†o sau ƒë√¢y ƒë·ªÉ ph√°t huy s·ª©c m·∫°nh to√†n d√¢n?',
    opts: [
      'Th·ª±c hi·ªán tƒÉng c∆∞·ªùng x√¢y d·ª±ng, c·ªßng c·ªë M·∫∑t tr·∫≠n T·ªï qu·ªëc c√°c c·∫•p.',
      'M·ªü r·ªông ph√°t tri·ªÉn kinh t·∫ø ƒë·ªëi ngo·∫°i, ch√∫ tr·ªçng h∆∞·ªõng v·ªÅ xu·∫•t kh·∫©u',
      'TƒÉng c∆∞·ªùng ph√°t ƒë·ªông c√°c phong tr√†o thi ƒëua s·∫£n xu·∫•t ph√°t tri·ªÉn kinh t·∫ø.',
      'TƒÉng c∆∞·ªùng ph√°t ƒë·ªông c√°c phong tr√†o quy√™n g√≥p gi√∫p ƒë·ª° ng∆∞·ªùi ngh√®o.'
    ],
    answer: 0
  },
  {
    id: 'p1q23',
    text: 'N·ªôi dung n√†o sau ƒë√¢y ph·∫£n √°nh ƒë√∫ng m·ªôt b√†i h·ªçc kinh nghi·ªám r√∫t ra t·ª´ th·ª±c ti·ªÖn c√¥ng cu·ªôc ƒê·ªïi m·ªõi kinh t·∫ø ·ªü Vi·ªát Nam t·ª´ nƒÉm 1986?',
    opts: [
      'Th·ª±c h√†nh v√† ph√°t huy t∆∞ t∆∞·ªüng l·∫•y d√¢n l√†m g·ªëc.',
      'Lu√¥n l·∫•y ƒë·ªëi m·ªõi ch√≠nh tr·ªã l√†m ti·ªÅn ƒë·ªÅ, tr·ªçng t√¢m.',
      'Gi·∫£m t·ªëi ƒëa can thi·ªáp c·ªßa nh√† n∆∞·ªõc v√†o th·ªã tr∆∞·ªùng.',
      'T·ª´ng b∆∞·ªõc th·ª±c hi·ªán ƒëa nguy√™n v·ªÅ ch√≠nh tr·ªã.'
    ],
    answer: 0
  },
  {
    id: 'p1q24',
    text: 'Nh·∫≠n ƒë·ªãnh n√†o sau ƒë√¢y l√† ƒë√∫ng v·ªÅ b·∫£n Tuy√™n ng√¥n ƒê·ªôc l·∫≠p do Ch·ªß t·ªãch H·ªì Ch√≠ Minh ƒë·ªçc tr∆∞·ªõc qu·ªëc d√¢n t·∫°i qu·∫£ng tr∆∞·ªùng Ba ƒê√¨nh nƒÉm 1945?',
    opts: [
      'Nh√¢n d√¢n Vi·ªát Nam ƒë√£ gi√†nh quy·ªÅn ƒë·ªôc l·∫≠p t·ª´ tay Ph√°p v√† Nh·∫≠t.',
      'Kh·∫≥ng ƒë·ªãnh quy·ªÅn ƒë·ªôc l·∫≠p c·ªßa Vi·ªát Nam c·∫£ v·ªÅ ph√°p l√Ω v√† th·ª±c ti·ªÖn.',
      'N·ªÅn ƒë·ªôc l·∫≠p c·ªßa Vi·ªát Nam ph·ª• thu·ªôc v√†o s·ª± c√¥ng nh·∫≠n c·ªßa qu·ªëc t·∫ø.',
      'Cu·ªôc c√°ch m·∫°ng d√¢n t·ªôc d√¢n ch·ªß nh√¢n d√¢n ·ªü Vi·ªát Nam ƒë√£ th√†nh c√¥ng.'
    ],
    answer: 1
  }
];

const PART2_ORIGINAL = [
  {
    id: 'p2q1',
    intro: 'Cho nh·ªØng th√¥ng tin trong b·∫£ng sau ƒë√¢y:',
    table: [
      { time: '1981', act: 'C√¥ng b·ªë S√°ch tr·∫Øng kh·∫≥ng ƒë·ªãnh ch·ªß quy·ªÅn l√£nh h·∫£i, l√£nh th·ªï Vi·ªát Nam.' },
      { time: '1982', act: 'Vi·ªát Nam th√†nh l·∫≠p huy·ªán ƒë·∫£o Ho√†ng Sa.' },
      { time: '1988', act: 'Qu√¢n Trung Qu·ªëc ƒë√°nh chi·∫øm ƒë·∫£o G·∫°c Ma c·ªßa Vi·ªát Nam.' },
      { time: '2014', act: 'Trung Qu·ªëc d√πng gi√†n khoan H·∫£i D∆∞∆°ng 981 x√¢m ph·∫°m ch·ªß quy·ªÅn bi·ªÉn ƒë·∫£o c·ªßa Vi·ªát Nam.' }
    ],
    subs: [
      { label: 'a', text: 'T∆∞ li·ªáu ƒë·ªÅ c·∫≠p ƒë·∫øn nh·ªØng ho·∫°t ƒë·ªông ƒë·∫ßu ti√™n trong qu√° tr√¨nh x√°c l·∫≠p ch·ªß quy·ªÅn tr√™n bi·ªÉn ƒê√¥ng c·ªßa Vi·ªát Nam.', answer: false },
      { label: 'b', text: 'Vi·ªát Nam c√≥ ch·ªß quy·ªÅn ƒë·ªëi v·ªõi hai qu·∫ßn ƒë·∫£o Ho√†ng Sa v√† Tr∆∞·ªùng Sa do ƒë√£ c√¥ng b·ªë S√°ch tr·∫Øng nƒÉm 1981.', answer: false },
      { label: 'c', text: 'Sau nƒÉm 1988, Trung Qu·ªëc ƒë√£ ƒë√°nh chi·∫øm to√†n b·ªô v√† tuy√™n b·ªë ch·ªß quy·ªÅn ƒë·ªëi v·ªõi qu·∫ßn ƒë·∫£o Tr∆∞·ªùng Sa.', answer: false },
      { label: 'd', text: 'H√†nh ƒë·ªông x√¢m ph·∫°m ch·ªß quy·ªÅn bi·ªÉn ƒë·∫£o Vi·ªát Nam c·ªßa Trung Qu·ªëc ƒë√£ vi ph·∫°m nghi√™m tr·ªçng lu·∫≠t ph√°p qu·ªëc t·∫ø.', answer: true }
    ]
  },
  {
    id: 'p2q2',
    intro: 'Cho ƒëo·∫°n t∆∞ li·ªáu sau ƒë√¢y:',
    quote: `"Th·∫Øng l·ª£i c·ªßa c√°ch m·∫°ng Trung Qu·ªëc nƒÉm 1949 ƒë√£ m·ªü ra b∆∞·ªõc ƒë·ªôt ph√° ƒë·∫ßu ti√™n, ph√° v·ª° √¢m m∆∞u kh·ªëng ch·∫ø Trung Qu·ªëc c·ªßa Mƒ© v√† nh·ªØng ƒë·∫∑c quy·ªÅn c·ªßa Li√™n X√¥ ·ªü v√πng ƒê√¥ng B·∫Øc Trung Qu·ªëc. ƒê·ªìng th·ªùi, s·ª± l·ªõn m·∫°nh c·ªßa c√°c n∆∞·ªõc T√¢y √Çu, Nh·∫≠t B·∫£n c≈©ng l√†m suy gi·∫£m v·ªã tr√≠ v√† ·∫£nh h∆∞·ªüng c·ªßa Mƒ© trong h·ªá th·ªëng t∆∞ b·∫£n ch·ªß nghƒ©a".`,
    source: '(Tr·∫ßn Th·ªã Vinh (ch·ªß bi√™n), L·ªãch s·ª≠ th·∫ø gi·ªõi hi·ªán ƒë·∫°i, Quy·ªÉn 2, NXB ƒê·∫°i h·ªçc S∆∞ ph·∫°m, 2016, tr. 94).',
    subs: [
      { label: 'a', text: 'T∆∞ li·ªáu ƒë·ªÅ c·∫≠p ƒë·∫øn qu√° tr√¨nh x√≥i m√≤n c·ªßa tr·∫≠t t·ª± th·∫ø gi·ªõi hai c·ª±c ƒë∆∞·ª£c h√¨nh th√†nh sau Chi·∫øn tranh th·∫ø gi·ªõi th·ª© hai.', answer: true },
      { label: 'b', text: 'C√°ch m·∫°ng Trung Qu·ªëc th·∫Øng l·ª£i l√† b∆∞·ªõc ƒë·ªôt ph√° l√†m x√≥i m√≤n tr·∫≠t t·ª± hai c·ª±c v√¨ ƒë√£ ph√° v·ª° thi·∫øt ch·∫ø c·ªßa tr·∫≠t t·ª± n√†y.', answer: true },
      { label: 'c', text: 'V·ªõi s·ª± l·ªõn m·∫°nh c·ªßa c√°c n∆∞·ªõc T√¢y √Çu, Nh·∫≠t B·∫£n, M·ªπ ƒë√£ ƒë√°nh m·∫•t v·ªã th·∫ø si√™u c∆∞·ªùng trong tr·∫≠t t·ª± hai c·ª±c Ianta.', answer: false },
      { label: 'd', text: 'V·ªõi s·ª± x√≥i m√≤n c·ªßa tr·∫≠t t·ª± hai c·ª±c, m·ªôt xu th·∫ø ƒëa c·ª±c ƒë√£ ƒë∆∞·ª£c h√¨nh th√†nh tr√™n th·∫ø gi·ªõi trong Chi·∫øn tranh l·∫°nh.', answer: false }
    ]
  },
  {
    id: 'p2q3',
    intro: 'Cho ƒëo·∫°n t∆∞ li·ªáu sau ƒë√¢y:',
    quote: `"Th·ªùi gian Vi·ªát Nam tham gia ASEAN tuy ch∆∞a ph·∫£i l√† d√†i, song ch√∫ng ta c√≥ th·ªÉ t·ª± h√†o v·ªÅ nh·ªØng ƒë√≥ng g√≥p quan tr·ªçng v√† d·∫•u ·∫•n Vi·ªát Nam. Trong 13 nƒÉm qua, Vi·ªát Nam ƒë√£ ƒë√≥ng g√≥p quan tr·ªçng trong vi·ªác x√°c ƒë·ªãnh c√°c ph∆∞∆°ng h∆∞·ªõng h·ª£p t√°c v√† t∆∞∆°ng lai ph√°t tri·ªÉn c≈©ng nh∆∞ trong c√°c quy·∫øt s√°ch l·ªõn c·ªßa ASEAN, g√≥p ph·∫ßn tƒÉng c∆∞·ªùng ƒëo√†n k·∫øt v√† h·ª£p t√°c c≈©ng nh∆∞ n√¢ng cao vai tr√≤ v√† v·ªã th·∫ø qu·ªëc t·∫ø c·ªßa Hi·ªáp h·ªôi".`,
    source: '(H·ªçc vi·ªán Ngo·∫°i giao, Vi·ªát Nam trong ti·∫øn tr√¨nh h·ªôi nh·∫≠p v√† ph√°t tri·ªÉn, Nxb. Ch√≠nh tr·ªã qu·ªëc gia, H√† N·ªôi, 2009, tr. 394)',
    subs: [
      { label: 'a', text: 'Vi·ªát Nam gia nh·∫≠p ASEAN v√†o nƒÉm 1995 v√† l√† th√†nh vi√™n th·ª© b·∫£y c·ªßa t·ªï ch·ª©c n√†y.', answer: true },
      { label: 'b', text: 'Vi·ªát Nam ƒë√£ c√≥ nh·ªØng ƒë√≥ng g√≥p quan tr·ªçng trong ƒë·ªãnh h∆∞·ªõng ph√°t tri·ªÉn c·ªßa ASEAN.', answer: true },
      { label: 'c', text: 'V·ªã th·∫ø qu·ªëc t·∫ø c·ªßa ASEAN ƒë∆∞·ª£c n√¢ng cao do qu√° tr√¨nh m·ªü r·ªông th√†nh vi√™n c·ªßa t·ªï ch·ª©c.', answer: false },
      { label: 'd', text: 'ASEAN ƒë∆∞·ª£c ƒë√°nh gi√° l√† t·ªï ch·ª©c h·ª£p t√°c qu·ªëc t·∫ø c√≥ uy t√≠n th·ª© hai th·∫ø gi·ªõi sau EU.', answer: false }
    ]
  },
  {
    id: 'p2q4',
    intro: 'Cho ƒëo·∫°n t∆∞ li·ªáu sau ƒë√¢y:',
    quote: `"Ghi nh·∫≠n nƒÉm 1990 s·∫Ω ƒë√°nh d·∫•u 100 nƒÉm k·ªâ ni·ªám ng√†y sinh c·ªßa Ch·ªß t·ªãch H·ªì Ch√≠ Minh, Anh h√πng gi·∫£i ph√≥ng d√¢n t·ªôc v√† Nh√† vƒÉn ho√° ki·ªát xu·∫•t c·ªßa Vi·ªát Nam.\nNh·∫≠n th·∫•y Ch·ªß t·ªãch H·ªì Ch√≠ Minh, m·ªôt bi·ªÉu t∆∞·ª£ng xu·∫•t s·∫Øc c·ªßa s·ª± kh·∫≥ng ƒë·ªãnh d√¢n t·ªôc, ƒë√£ c·ªëng hi·∫øn tr·ªçn ƒë·ªùi m√¨nh cho s·ª± nghi·ªáp gi·∫£i ph√≥ng d√¢n t·ªôc c·ªßa nh√¢n d√¢n Vi·ªát Nam, g√≥p ph·∫ßn v√†o cu·ªôc ƒë·∫•u tranh chung c·ªßa c√°c d√¢n t·ªôc v√¨ ho√† b√¨nh, ƒë·ªôc l·∫≠p d√¢n t·ªôc, d√¢n ch·ªß v√† ti·∫øn b·ªô x√£ h·ªôi.`,
    source: '(Tr√≠ch: Ngh·ªã quy·∫øt s·ªë 24C/18.65, cu·ªôc h·ªçp c·ªßa ƒê·∫°i h·ªôi ƒë·ªìng UNESCO l·∫ßn th·ª© 24 ·ªü Pa-ri (Ph√°p), t·ª´ ng√†y 20-10 ƒë·∫øn ng√†y 20-11-1987)',
    subs: [
      { label: 'a', text: 'T∆∞ li·ªáu kh·∫≥ng ƒë·ªãnh s·ª± t√¥n vinh c·ªßa th·∫ø gi·ªõi ƒë·ªëi v·ªõi Ch·ªß t·ªãch H·ªì Ch√≠ Minh nh√¢n k·ª∑ ni·ªám 100 nƒÉm nƒÉm sinh.', answer: true },
      { label: 'b', text: 'Ch·ªß t·ªãch H·ªì Ch√≠ Minh ƒë√£ c√≥ nh·ªØng ƒë√≥ng g√≥p to l·ªõn cho h√≤a b√¨nh, ƒë·ªôc l·∫≠p, d√¢n ch·ªß v√† ti·∫øn b·ªô tr√™n th·∫ø gi·ªõi.', answer: true },
      { label: 'c', text: 'H·ªì Ch√≠ Minh nhi·ªÅu t√¥n gi√°o tr√™n th·∫ø gi·ªõi t√¥n vinh nh∆∞ nh·ªØng v·ªã th√°nh v√¨ ƒë√£ d√¢ng hi·∫øn c·∫£ ƒë·ªùi cho s·ª± nghi·ªáp gi·∫£i ph√≥ng con ng∆∞·ªùi.', answer: false },
      { label: 'd', text: 'S·ª± t√¥n vinh c·ªßa qu·ªëc t·∫ø ƒë·ªëi v·ªõi Ch·ªß t·ªãch H·ªì Ch√≠ Minh l√† k·∫øt qu·∫£ cu·ªôc v·∫≠n ƒë·ªông ngo·∫°i giao c·ªßa Vi·ªát Nam.', answer: false }
    ]
  }
];

/* ============================================================
   STATE
   ============================================================ */
let part1Questions = [];
let part2Questions = [];
let userAnswers1 = {};  // id -> optIndex (0-3)
let userAnswers2 = {};  // id+sub -> true/false
let timerInterval = null;
let secondsLeft = 45 * 60;
let submitted = false;

/* ============================================================
   SHUFFLE
   ============================================================ */
function shuffle(arr) {
  const a = [...arr];
  for (let i = a.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [a[i], a[j]] = [a[j], a[i]];
  }
  return a;
}

function buildPart1Questions() {
  return shuffle(PART1_ORIGINAL).map(q => {
    const indices = [0,1,2,3];
    const shuffledIdx = shuffle(indices);
    const newAnswer = shuffledIdx.indexOf(q.answer);
    return {
      ...q,
      opts: shuffledIdx.map(i => q.opts[i]),
      answer: newAnswer,
      _origOpts: q.opts
    };
  });
}

function buildPart2Questions() {
  return shuffle(PART2_ORIGINAL);
}

/* ============================================================
   RENDER PART 1
   ============================================================ */
function renderPart1() {
  const container = document.getElementById('part1-container');
  container.innerHTML = '';
  part1Questions.forEach((q, qi) => {
    const card = document.createElement('div');
    card.className = 'q-card';
    card.id = 'card1-' + q.id;

    const num = document.createElement('div');
    num.className = 'q-num';
    num.textContent = `C√¢u ${qi + 1} / 24`;
    card.appendChild(num);

    const qt = document.createElement('div');
    qt.className = 'q-text';
    qt.textContent = q.text;
    card.appendChild(qt);

    const opts = document.createElement('div');
    opts.className = 'options';
    const labels = ['A', 'B', 'C', 'D'];
    q.opts.forEach((opt, oi) => {
      const lbl = document.createElement('label');
      lbl.className = 'opt';
      lbl.id = `opt-${q.id}-${oi}`;
      lbl.innerHTML = `<input type="radio" name="${q.id}" value="${oi}"> <span><strong>${labels[oi]}.</strong> ${opt}</span>`;
      lbl.querySelector('input').addEventListener('change', () => {
        userAnswers1[q.id] = oi;
        document.querySelectorAll(`label[id^="opt-${q.id}-"]`).forEach(l => l.classList.remove('selected'));
        lbl.classList.add('selected');
        card.classList.add('answered');
        updateProgress();
      });
      opts.appendChild(lbl);
    });
    card.appendChild(opts);

    const mark = document.createElement('div');
    mark.className = 'review-mark';
    mark.id = 'mark1-' + q.id;
    card.appendChild(mark);

    container.appendChild(card);
  });
}

/* ============================================================
   RENDER PART 2
   ============================================================ */
function renderPart2() {
  const container = document.getElementById('part2-container');
  container.innerHTML = '';
  part2Questions.forEach((q, qi) => {
    const card = document.createElement('div');
    card.className = 'q-card';
    card.id = 'card2-' + q.id;

    const num = document.createElement('div');
    num.className = 'q-num';
    num.textContent = `C√¢u ${qi + 1} / 4 (Ph·∫ßn II)`;
    card.appendChild(num);

    const qt = document.createElement('div');
    qt.className = 'q-text';

    // Intro text
    const introSpan = document.createElement('span');
    introSpan.textContent = q.intro;
    qt.appendChild(introSpan);

    // Table or Quote
    if (q.table) {
      const tbl = document.createElement('table');
      tbl.style.cssText = 'width:100%;border-collapse:collapse;margin:10px 0 8px;font-size:0.88rem;';
      const thead = document.createElement('thead');
      thead.innerHTML = '<tr style="background:#1a1208;color:#d4a017;"><th style="padding:7px 10px;border:1px solid #d5c5a1;text-align:left">Th·ªùi gian</th><th style="padding:7px 10px;border:1px solid #d5c5a1;text-align:left">Ho·∫°t ƒë·ªông</th></tr>';
      tbl.appendChild(thead);
      const tbody = document.createElement('tbody');
      q.table.forEach((row, ri) => {
        const tr = document.createElement('tr');
        tr.style.background = ri % 2 === 0 ? '#fff' : '#fdf6e3';
        tr.innerHTML = `<td style="padding:7px 10px;border:1px solid #d5c5a1;font-weight:600;white-space:nowrap">${row.time}</td><td style="padding:7px 10px;border:1px solid #d5c5a1">${row.act}</td>`;
        tbody.appendChild(tr);
      });
      tbl.appendChild(tbody);
      qt.appendChild(tbl);
    }
    if (q.quote) {
      const bq = document.createElement('blockquote');
      bq.style.whiteSpace = 'pre-line';
      bq.textContent = q.quote;
      qt.appendChild(bq);
    }
    if (q.source) {
      const src = document.createElement('span');
      src.className = 'source-note';
      src.textContent = q.source;
      qt.appendChild(src);
    }
    card.appendChild(qt);

    // True/False table
    const tbl2 = document.createElement('table');
    tbl2.className = 'tf-table';
    const thead2 = document.createElement('thead');
    thead2.innerHTML = '<tr><th style="width:32px">√ù</th><th>N·ªôi dung</th><th style="width:160px">Ch·ªçn ƒë√°p √°n</th></tr>';
    tbl2.appendChild(thead2);
    const tbody2 = document.createElement('tbody');

    q.subs.forEach(sub => {
      const key = q.id + '-' + sub.label;
      const tr = document.createElement('tr');
      const tdLabel = document.createElement('td');
      tdLabel.style.cssText = 'text-align:center;font-weight:700;font-family:Playfair Display,serif;';
      tdLabel.textContent = sub.label + ')';
      const tdText = document.createElement('td');
      tdText.textContent = sub.text;
      const tdBtns = document.createElement('td');
      tdBtns.style.textAlign = 'center';

      const btnTrue = document.createElement('button');
      btnTrue.className = 'tf-btn';
      btnTrue.id = `tf-${key}-T`;
      btnTrue.textContent = '‚úî ƒê√∫ng';
      btnTrue.onclick = () => selectTF(key, true, q.id);

      const btnFalse = document.createElement('button');
      btnFalse.className = 'tf-btn';
      btnFalse.id = `tf-${key}-F`;
      btnFalse.textContent = '‚úò Sai';
      btnFalse.onclick = () => selectTF(key, false, q.id);

      const group = document.createElement('div');
      group.className = 'tf-radio-group';
      group.appendChild(btnTrue);
      group.appendChild(btnFalse);
      tdBtns.appendChild(group);

      tr.appendChild(tdLabel);
      tr.appendChild(tdText);
      tr.appendChild(tdBtns);
      tbody2.appendChild(tr);
    });
    tbl2.appendChild(tbody2);
    card.appendChild(tbl2);

    const mark = document.createElement('div');
    mark.className = 'review-mark';
    mark.id = 'mark2-' + q.id;
    card.appendChild(mark);

    container.appendChild(card);
  });
}

function selectTF(key, val, qId) {
  if (submitted) return;
  userAnswers2[key] = val;
  const T = document.getElementById(`tf-${key}-T`);
  const F = document.getElementById(`tf-${key}-F`);
  T.className = 'tf-btn' + (val === true ? ' selected-true' : '');
  F.className = 'tf-btn' + (val === false ? ' selected-false' : '');
  updateProgress();
  // check if all 4 subs answered for that card
  const q = part2Questions.find(q => q.id === qId);
  if (q) {
    const allDone = q.subs.every(s => userAnswers2[q.id + '-' + s.label] !== undefined);
    const card = document.getElementById('card2-' + qId);
    if (allDone && card) card.classList.add('answered');
  }
}

/* ============================================================
   PROGRESS
   ============================================================ */
function updateProgress() {
  const done1 = Object.keys(userAnswers1).length;
  const done2 = Object.keys(userAnswers2).length;
  const total = 24 + 16; // 24 part1 + 16 subs
  const done = done1 + done2;
  document.getElementById('progress-text').textContent = `${done} / ${total} √Ω ƒë√£ l√†m`;
}

/* ============================================================
   TIMER
   ============================================================ */
function startTimer() {
  secondsLeft = 45 * 60;
  timerInterval = setInterval(() => {
    secondsLeft--;
    const m = Math.floor(secondsLeft / 60);
    const s = secondsLeft % 60;
    const disp = document.getElementById('timer-display');
    disp.textContent = `${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
    if (secondsLeft <= 300) disp.classList.add('urgent');
    if (secondsLeft <= 0) {
      clearInterval(timerInterval);
      if (!submitted) submitQuiz(true); // auto = true
    }
  }, 1000);
}

/* ============================================================
   SUBMIT (n√¢ng c·∫•p v·ªõi modal x·ªãn)
   ============================================================ */
function submitQuiz(auto = false) {
  if (submitted) return;

  // T√≠nh s·ªë c√¢u ch∆∞a tr·∫£ l·ªùi
  const done1 = Object.keys(userAnswers1).length;
  const done2 = Object.keys(userAnswers2).length;
  const totalUnanswered = (24 - done1) + (16 - done2);

  // N·∫øu kh√¥ng ph·∫£i auto v√† c√≤n c√¢u ch∆∞a l√†m -> hi·ªán modal
  if (!auto && totalUnanswered > 0) {
    // C·∫≠p nh·∫≠t n·ªôi dung modal
    document.getElementById('modalUnansweredCount').textContent = totalUnanswered;
    document.getElementById('submitConfirmModal').classList.add('show');
    return; // ch·ªù ng∆∞·ªùi d√πng x·ª≠ l√Ω modal
  }

  // N·∫øu auto ho·∫∑c kh√¥ng c√≤n unanswered -> n·ªôp b√†i lu√¥n
  performSubmit(auto);
}

// H√†m n·ªôp b√†i th·ª±c s·ª±
function performSubmit(auto) {
  submitted = true;
  clearInterval(timerInterval);
  document.getElementById('timer-display').style.color = '#888';
  document.getElementById('submit-btn').disabled = true;

  // Disable t·∫•t c·∫£ input
  document.querySelectorAll('input[type="radio"]').forEach(i => i.disabled = true);
  // Disable t·∫•t c·∫£ n√∫t TF
  document.querySelectorAll('.tf-btn').forEach(btn => btn.style.pointerEvents = 'none');

  const { score1, score2, details2 } = calculateScore();
  showReview(score1, score2, details2);
}

/* ============================================================
   X·ª≠ l√Ω modal
   ============================================================ */
document.getElementById('modalCancelBtn').addEventListener('click', function() {
  document.getElementById('submitConfirmModal').classList.remove('show');
});

document.getElementById('modalSubmitBtn').addEventListener('click', function() {
  document.getElementById('submitConfirmModal').classList.remove('show');
  performSubmit(false); // kh√¥ng auto
});

// Click v√†o overlay c≈©ng ƒë√≥ng modal (ti·ªán l·ª£i)
document.getElementById('submitConfirmModal').addEventListener('click', function(e) {
  if (e.target === this) {
    this.classList.remove('show');
  }
});

/* ============================================================
   SCORING
   ============================================================ */
function calculateScore() {
  // Part 1: 24 √ó 0.25
  let score1 = 0;
  part1Questions.forEach(q => {
    if (userAnswers1[q.id] === q.answer) score1 += 0.25;
  });

  // Part 2: 4 √ó up to 1.0
  let score2 = 0;
  const details2 = {};
  part2Questions.forEach(q => {
    let correct = 0;
    q.subs.forEach(sub => {
      const key = q.id + '-' + sub.label;
      if (userAnswers2[key] === sub.answer) correct++;
    });
    details2[q.id] = correct;
    if (correct === 4) score2 += 1.0;
    else if (correct === 3) score2 += 0.5;
    else if (correct === 2) score2 += 0.25;
    else if (correct === 1) score2 += 0.1;
  });

  return { score1, score2, details2 };
}

/* ============================================================
   REVIEW
   ============================================================ */
function showReview(score1, score2, details2) {
  const total = +(score1 + score2).toFixed(2);

  // Part 1 review
  part1Questions.forEach(q => {
    const userAns = userAnswers1[q.id];
    const labels = ['A', 'B', 'C', 'D'];
    q.opts.forEach((_, oi) => {
      const lbl = document.getElementById(`opt-${q.id}-${oi}`);
      if (!lbl) return;
      lbl.classList.remove('selected');
      if (oi === q.answer) lbl.classList.add('correct');
      else if (oi === userAns && userAns !== q.answer) lbl.classList.add('wrong');
    });
    const mark = document.getElementById('mark1-' + q.id);
    if (mark) {
      if (userAns === q.answer) {
        mark.className = 'review-mark correct-mark';
        mark.textContent = `‚úî ƒê√∫ng ‚Äî ƒê√°p √°n: ${labels[q.answer]}`;
      } else if (userAns === undefined) {
        mark.className = 'review-mark wrong-mark';
        mark.textContent = `‚ö† Ch∆∞a tr·∫£ l·ªùi ‚Äî ƒê√°p √°n ƒë√∫ng: ${labels[q.answer]}`;
      } else {
        mark.className = 'review-mark wrong-mark';
        mark.textContent = `‚úò Sai ‚Äî B·∫°n ch·ªçn: ${labels[userAns]} | ƒê√°p √°n ƒë√∫ng: ${labels[q.answer]}`;
      }
    }
  });

  // Part 2 review
  part2Questions.forEach(q => {
    const correct = details2[q.id];
    q.subs.forEach(sub => {
      const key = q.id + '-' + sub.label;
      const userVal = userAnswers2[key];
      const isCorrect = userVal === sub.answer;
      const T = document.getElementById(`tf-${key}-T`);
      const F = document.getElementById(`tf-${key}-F`);
      if (T) T.className = 'tf-btn';
      if (F) F.className = 'tf-btn';
      // show correct answer
      const correctBtn = sub.answer ? T : F;
      if (correctBtn) correctBtn.classList.add('correct-reveal');
      // show user's wrong answer
      if (userVal !== undefined && !isCorrect) {
        const wrongBtn = userVal ? T : F;
        if (wrongBtn) wrongBtn.classList.add('wrong-reveal');
      }
    });
    const qScore = correct === 4 ? 1.0 : correct === 3 ? 0.5 : correct === 2 ? 0.25 : correct === 1 ? 0.1 : 0;
    const mark = document.getElementById('mark2-' + q.id);
    if (mark) {
      if (correct === 4) {
        mark.className = 'review-mark correct-mark';
        mark.textContent = `‚úî Ho√†n to√†n ƒë√∫ng ‚Äî +1.0 ƒëi·ªÉm`;
      } else if (correct === 0) {
        mark.className = 'review-mark wrong-mark';
        mark.textContent = `‚úò Kh√¥ng c√≥ √Ω n√†o ƒë√∫ng ‚Äî +0 ƒëi·ªÉm`;
      } else {
        mark.className = 'review-mark partial-mark';
        mark.textContent = `‚óë ƒê√∫ng ${correct}/4 √Ω ‚Äî +${qScore.toFixed(2)} ƒëi·ªÉm`;
      }
    }
  });

  // Result panel
  document.getElementById('score-val').textContent = total.toFixed(2) + ' / 10';
  let grade = '';
  if (total >= 8) grade = 'üèÜ Xu·∫•t s·∫Øc';
  else if (total >= 6.5) grade = 'üëç Kh√°';
  else if (total >= 5) grade = 'üìò Trung b√¨nh';
  else grade = 'üìñ C·∫ßn c·ªë g·∫Øng th√™m';
  document.getElementById('score-detail').textContent = grade;

  const tbody = document.getElementById('score-tbody');
  tbody.innerHTML = `
    <tr><td>Ph·∫ßn I (24 c√¢u √ó 0.25ƒë)</td><td>${score1.toFixed(2)}ƒë</td><td>6.0ƒë</td></tr>
    <tr><td>Ph·∫ßn II (4 c√¢u)</td><td>${score2.toFixed(2)}ƒë</td><td>4.0ƒë</td></tr>
    <tr style="font-weight:700;color:#d4a017"><td>T·ªïng c·ªông</td><td>${total.toFixed(2)}ƒë</td><td>10.0ƒë</td></tr>
  `;

  document.getElementById('result-panel').style.display = 'block';
  document.getElementById('result-panel').scrollIntoView({ behavior: 'smooth' });
}

/* ============================================================
   REDO
   ============================================================ */
function redoQuiz() {
  submitted = false;
  userAnswers1 = {};
  userAnswers2 = {};
  clearInterval(timerInterval);
  document.getElementById('result-panel').style.display = 'none';
  document.getElementById('submit-btn').disabled = false;
  document.getElementById('timer-display').classList.remove('urgent');
  document.getElementById('timer-display').style.color = '';
  document.getElementById('submitConfirmModal').classList.remove('show');

  part1Questions = buildPart1Questions();
  part2Questions = buildPart2Questions();
  renderPart1();
  renderPart2();
  updateProgress();
  startTimer();
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

/* ============================================================
   INIT
   ============================================================ */
function init() {
  part1Questions = buildPart1Questions();
  part2Questions = buildPart2Questions();
  renderPart1();
  renderPart2();
  updateProgress();
  startTimer();
}

window.addEventListener('DOMContentLoaded', init);
</script>
</body>
</html>
